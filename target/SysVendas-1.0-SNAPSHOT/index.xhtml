<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="jakarta.faces.core">

<h:head>
    <title>Primefaces</title>
</h:head>

<h:body>
    <h:form id="frmList">
        <h:panelGroup id="pngList">
            <p:fieldset toggleable="true">
                <p:dataTable id="datalist"
                            value="#{usuariosController.usuarioList}"
                            var="item"
                            selectionMode="single"
                            selection="#{usuariosController.selected}"
                            widgetVar="datalistUsuariosWidgetVar"
                            rowKey="#{item.id}"
                            paginator="true"
                            rows="5"
                            rowsPerPageTemplate="5,10,50,100"
                            emptyMessage="Nenhum usuário cadastrado...">

                   <p:ajax event="rowSelect" update="btnEdit btnDelete btnView" />
                   <p:ajax event="rowUnselect" update="btnEdit btnDelete btnView" />

                   <p:column width="5%" sortBy="#{item.id}" filterBy="#{item.id}">
                       <f:facet name="header">
                           <h:outputText value="ID" />
                       </f:facet>
                       <h:outputText value="#{item.id}" />
                   </p:column>

                   <p:column width="15%" sortBy="#{item.nome}" filterBy="#{item.nome}">
                       <f:facet name="header">
                           <h:outputText value="Nome" />
                       </f:facet>
                       <h:outputText value="#{item.nome}" />
                   </p:column>

                   <p:column width="20%" sortBy="#{item.email}" filterBy="#{item.email}">
                       <f:facet name="header">
                           <h:outputText value="Email" />
                       </f:facet>
                       <h:outputText value="#{item.email}" />
                   </p:column>

                   <p:column width="15%" sortBy="#{item.dataCadastro}" filterBy="#{item.dataCadastro}">
                       <f:facet name="header">
                           <h:outputText value="Data Cadastro" />
                       </f:facet>
                       <h:outputText value="#{item.dataCadastro}">
                           <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                       </h:outputText>
                   </p:column>

                   <p:column width="8%" sortBy="#{item.ativo}" filterBy="#{item.ativo}">
                       <f:facet name="header">
                           <h:outputText value="Ativo" />
                       </f:facet>
                       <h:outputText value="#{item.ativo ? 'Sim' : 'Não'}" />
                   </p:column>

                   <f:facet name="footer">
                       <p:commandButton id="btnEdit" value="Editar" icon="pi pi-pencil"
                                        update=":frmList" process="@this"
                                        disabled="#{usuariosController.selected == null}" />

                       <p:commandButton id="btnDelete" value="Excluir" icon="pi pi-trash"
                                        update=":frmList" process="@this"
                                        disabled="#{usuariosController.selected == null}" />

                       <p:commandButton id="btnView" value="Detalhes" icon="pi pi-search"
                                        update=":frmList" process="@this"
                                        disabled="#{usuariosController.selected == null}" />
                   </f:facet>
                </p:dataTable>

            </p:fieldset>
        </h:panelGroup>
    </h:form>
</h:body>

</html>
